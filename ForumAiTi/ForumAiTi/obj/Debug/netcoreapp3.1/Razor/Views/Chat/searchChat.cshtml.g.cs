#pragma checksum "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "16b3af3431be52cce3204381422a5bb2a6826d70"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Chat_searchChat), @"mvc.1.0.view", @"/Views/Chat/searchChat.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\_ViewImports.cshtml"
using ForumAiTi;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\_ViewImports.cshtml"
using ForumAiTi.Models;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"16b3af3431be52cce3204381422a5bb2a6826d70", @"/Views/Chat/searchChat.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"e8686f0c93b9c6c3b09795ba00f50435e4f43845", @"/Views/_ViewImports.cshtml")]
    #nullable restore
    public class Views_Chat_searchChat : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<List<NguoiDung>>
    #nullable disable
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
#nullable restore
#line 1 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
  
    ForumAiTiContext _context = new ForumAiTiContext();
    CttroChuyen getFinalMess(string taikhoan)
    {
        CttroChuyen final = _context.CttroChuyen.OrderByDescending(x => x.ThoiGianGui).FirstOrDefault(x => (x.NguoiGui ==
        taikhoan && x.NguoiNhan == User.FindFirst("TaiKhoan").Value.Trim()) || (x.NguoiNhan == taikhoan && x.NguoiGui ==
        User.FindFirst("TaiKhoan").Value.Trim()));
        return final;
    }
    NguoiDung getUSERByTK(string tk)
    {
        return _context.NguoiDung.Where(x => x.TaiKhoan == tk).FirstOrDefault();
    }
    string getAvatar(byte[] avataar)
    {
        if (avataar == null) return "/images/noneavatar.jpg";
        string imageBase64Data = Convert.ToBase64String(avataar);
        string imageDataURL = string.Format("data:image/jpg;base64,{0}", imageBase64Data);
        return imageDataURL;
    }
    CttroChuyen getLastMess(int ma)
    {
        return _context.CttroChuyen.OrderByDescending(x => x.ThoiGianGui).FirstOrDefault(x => x.MaTroChuyen == ma);
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 27 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
 if (ViewBag.textSearch.Equals("1"))
{
    Console.WriteLine("1");

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div id=\"chat-friend\" data-mdb-perfect-scrollbar=\"true\" style=\"position: relative; height: 500px\">\r\n        <ul class=\"list-unstyled mb-0\" id=\"ul-chat\">\r\n");
#nullable restore
#line 32 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
             if (((IEnumerable<TroChuyen>)ViewBag.ListChat).Count() == 0)
            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <li class=\"p-2 border-bottom\">\r\n                    <h2 class=\"text-center\">Bạn chưa có cuộc trò chuyện nào</h2>\r\n                </li>\r\n");
#nullable restore
#line 37 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
            }
            else
            {
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 40 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                 foreach (var item in (IEnumerable<TroChuyen>)ViewBag.ListChat)
                {
                    

#line default
#line hidden
#nullable disable
#nullable restore
#line 104 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                     if (item.ThanhVien1.Trim().Equals(User.FindFirst("TaiKhoan").Value.Trim()))
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <li class=\"p-2 border-bottom\">\r\n                            <a id=\"clickchatDetails\" class=\"d-flex justify-content-between\">\r\n                                <input type=\"text\"");
            BeginWriteAttribute("name", " name=\"", 4547, "\"", 4554, 0);
            EndWriteAttribute();
            WriteLiteral(" hidden id=\"MaUSER2\"");
            BeginWriteAttribute("value", " value=\"", 4575, "\"", 4599, 1);
#nullable restore
#line 108 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 4583, item.ThanhVien2, 4583, 16, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                                <div class=\"d-flex flex-row row\">\r\n                                    <div class=\"col-3\">\r\n                                        <img");
            BeginWriteAttribute("src", " src=\"", 4771, "\"", 4825, 1);
#nullable restore
#line 111 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 4777, getAvatar(getUSERByTK(item.ThanhVien2).HinhAnh), 4777, 48, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" alt=""avatar"" class=""d-flex m-auto""
                                            id=""avatarChat"">
                                    </div>
                                    <div class=""pt-1 ml-2 col-9"">
                                        <p class=""fw-bold mb-0"">");
#nullable restore
#line 115 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                           Write(item.ThanhVien2);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 116 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                         if (getLastMess(item.MaTroChuyen) == null)
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <p class=\"small text-muted mb-1\">Bạn chưa có tin nhắn nào.</p>\r\n                                            <p class=\"small text-muted\">&nbsp;</p>\r\n");
#nullable restore
#line 120 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <p class=\"small text-muted mb-1\">");
#nullable restore
#line 123 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                                        Write(getLastMess(item.MaTroChuyen).NoiDung);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                                            <p class=\"small text-muted\">");
#nullable restore
#line 124 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                                   Write(String.Format("{0:HH:mm:ss dd/MM/yyyy}",
                            getLastMess(item.MaTroChuyen).ThoiGianGui));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 126 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                        }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                    </div>
                                </div>
                                <div class=""pt-1"">
                                    <p class=""small text-muted mb-1""></p>
                                    <span class=""badge bg-danger rounded-pill float-end"">1</span>
                                </div>
                            </a>
                        </li>
");
#nullable restore
#line 135 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                    }
                    else
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <li class=\"p-2 border-bottom\">\r\n                            <a id=\"clickchatDetails\" class=\"d-flex justify-content-between\">\r\n                                <input type=\"text\"");
            BeginWriteAttribute("name", " name=\"", 6616, "\"", 6623, 0);
            EndWriteAttribute();
            WriteLiteral(" hidden id=\"MaUSER2\"");
            BeginWriteAttribute("value", " value=\"", 6644, "\"", 6668, 1);
#nullable restore
#line 140 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 6652, item.ThanhVien1, 6652, 16, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                                <div class=\"d-flex flex-row row\">\r\n                                    <div class=\"col-3\">\r\n                                        <img");
            BeginWriteAttribute("src", " src=\"", 6840, "\"", 6894, 1);
#nullable restore
#line 143 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 6846, getAvatar(getUSERByTK(item.ThanhVien2).HinhAnh), 6846, 48, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" alt=""avatar"" class=""d-flex m-auto""
                                            id=""avatarChat"">
                                    </div>
                                    <div class=""pt-1 ml-2 col-9"">
                                        <p class=""fw-bold mb-0"">");
#nullable restore
#line 147 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                           Write(item.ThanhVien2);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 148 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                         if (getLastMess(item.MaTroChuyen) == null)
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <p class=\"small text-muted mb-1\">Bạn chưa có tin nhắn nào.</p>\r\n                                            <p class=\"small text-muted\">&nbsp;</p>\r\n");
#nullable restore
#line 152 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                        }
                                        else
                                        {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                            <p class=\"small text-muted mb-1\">");
#nullable restore
#line 155 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                                        Write(getLastMess(item.MaTroChuyen).NoiDung);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                                            <p class=\"small text-muted\">");
#nullable restore
#line 156 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                                   Write(String.Format("{0:HH:mm:ss dd/MM/yyyy}",
                            getLastMess(item.MaTroChuyen).ThoiGianGui));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 158 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                        }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                    </div>
                                </div>
                                <div class=""pt-1"">
                                    <p class=""small text-muted mb-1""></p>
                                    <span class=""badge bg-danger rounded-pill float-end"">1</span>
                                </div>
                            </a>
                        </li>
");
#nullable restore
#line 167 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 167 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                     
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 168 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                 
            }

#line default
#line hidden
#nullable disable
            WriteLiteral("        </ul>\r\n    </div>\r\n");
#nullable restore
#line 172 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
}
else if (ViewBag.textSearch.Equals("2"))
{
    Console.WriteLine("2");

#line default
#line hidden
#nullable disable
            WriteLiteral("    <div id=\"chat-friend\" data-mdb-perfect-scrollbar=\"true\" style=\"position: relative; height: 500px\">\r\n        <ul class=\"list-unstyled mb-0\" id=\"ul-chat\">\r\n");
#nullable restore
#line 178 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
             if (Model.Count() == 0)
            {

#line default
#line hidden
#nullable disable
            WriteLiteral("                <li class=\"p-2 border-bottom\">\r\n                    <h2 class=\"text-center\">Không tìm thấy thành viên nào.</h2>\r\n                </li>\r\n");
#nullable restore
#line 183 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
            }
            else
            {
                

#line default
#line hidden
#nullable disable
#nullable restore
#line 186 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                 foreach (var item in Model)
                {

#line default
#line hidden
#nullable disable
            WriteLiteral("                    <li class=\"p-2 border-bottom\">\r\n                        <a id=\"clickchatDetails\" class=\"d-flex justify-content-between\">\r\n                            <input type=\"text\"");
            BeginWriteAttribute("name", " name=\"", 9238, "\"", 9245, 0);
            EndWriteAttribute();
            WriteLiteral(" hidden id=\"MaUSER2\"");
            BeginWriteAttribute("value", " value=\"", 9266, "\"", 9288, 1);
#nullable restore
#line 190 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 9274, item.TaiKhoan, 9274, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                            <div class=\"d-flex flex-row row\">\r\n                                <div class=\"col-3\">\r\n                                    <img");
            BeginWriteAttribute("src", " src=\"", 9448, "\"", 9500, 1);
#nullable restore
#line 193 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
WriteAttributeValue("", 9454, getAvatar(getUSERByTK(item.TaiKhoan).HinhAnh), 9454, 46, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(@" alt=""avatar"" class=""d-flex m-auto""
                                        id=""avatarChat"">
                                </div>
                                <div class=""pt-1 ml-2 col-9"">
                                    <p class=""fw-bold mb-0"">");
#nullable restore
#line 197 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                       Write(item.TaiKhoan);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 198 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                     if (getFinalMess(item.TaiKhoan) == null)
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p class=\"small text-muted mb-1\">Bạn chưa có tin nhắn nào.</p>\r\n                                        <p class=\"small text-muted\">&nbsp;</p>\r\n");
#nullable restore
#line 202 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                    }
                                    else
                                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                                        <p class=\"small text-muted mb-1\">");
#nullable restore
#line 205 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                                    Write(getFinalMess(item.TaiKhoan).NoiDung);

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n                                        <p class=\"small text-muted\">");
#nullable restore
#line 206 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                                               Write(String.Format("{0:HH:mm:ss dd/MM/yyyy}",
                            getFinalMess(item.TaiKhoan).ThoiGianGui));

#line default
#line hidden
#nullable disable
            WriteLiteral("</p>\r\n");
#nullable restore
#line 208 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                                    }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"                                </div>
                            </div>
                            <div class=""pt-1"">
                                <p class=""small text-muted mb-1""></p>
                                <span class=""badge bg-danger rounded-pill float-end"">1</span>
                            </div>
                        </a>
                    </li>
");
#nullable restore
#line 217 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                }

#line default
#line hidden
#nullable disable
#nullable restore
#line 217 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
                 
            }

#line default
#line hidden
#nullable disable
            WriteLiteral("        </ul>\r\n    </div>\r\n");
#nullable restore
#line 221 "C:\Users\Dell\OneDrive - hcmunre.edu.vn\Desktop\ForumAiTi\ForumAiTi\ForumAiTi\Views\Chat\searchChat.cshtml"
}

#line default
#line hidden
#nullable disable
        }
        #pragma warning restore 1998
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; } = default!;
        #nullable disable
        #nullable restore
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<List<NguoiDung>> Html { get; private set; } = default!;
        #nullable disable
    }
}
#pragma warning restore 1591
